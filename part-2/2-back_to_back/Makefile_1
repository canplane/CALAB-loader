all: apager dpager test

apager: apager.c common.c debug.c
	gcc -static -Wl,-Ttext-segment=0x60000000 apager.c -o apager

dpager: dpager.c common.c debug.c
	gcc -static -Wl,-Ttext-segment=0x60000000 dpager.c -o dpager

test: branch.c example/my_test.c
	gcc -static -Wl,-Ttext-segment=0x10000000 example/my_test.c -o test1
	gcc -static -Wl,-Ttext-segment=0x18000000 example/my_test.c -o test2
	gcc -static -Wl,-Ttext-segment=0x20000000 example/my_test.c -o test3
	gcc -static -Wl,-Ttext-segment=0x28000000 example/my_test.c -o test4
	gcc -static -Wl,-Ttext-segment=0x30000000 example/my_test.c -o test5
	gcc -static -Wl,-Ttext-segment=0x38000000 example/my_test.c -o test6
	gcc -static -Wl,-Ttext-segment=0x40000000 example/my_test.c -o test7
	gcc -static -Wl,-Ttext-segment=0x48000000 example/my_test.c -o test8

run_apager:
	./apager test1 test2 test3 test4 test5 test6 test7 test8

run_dpager:
	./dpager test1 test2 test3 test4 test5 test6 test7 test8

clean:
	rm -f apager
	rm -f dpager
	rm -f test1
	rm -f test2
	rm -f test3
	rm -f test4
	rm -f test5
	rm -f test6
	rm -f test7
	rm -f test8